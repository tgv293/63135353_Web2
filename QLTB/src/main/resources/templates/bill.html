<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Google Fonts -->
<link href="https://fonts.gstatic.com" rel="preconnect">
<link href="assets/dist/css/bill.css" rel="stylesheet">
<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
	rel="stylesheet">
</head>
<body>
	<div th:replace="fragments/slidebar :: slidebar"></div>
	<section class="home">
		<div class="text">Thống Kê Phiếu Mượn</div>
		<div id="toast" th:class="${message}"></div>

		<div
			class="filter-container container d-flex justify-content-center align-items-center"
			style="width: 94%">
			<div class="filter-content row mt-4">
				<form class="w-100 filter  d-flex justify-content-between my-3">
					<div class=" col-4 col-sm-4 border border-info px-3"
						style="color: var(--text-color);">
						<b>Chế độ xem</b>
						<div class="form-check ps-5 ">
							<input class="form-check-input" type="radio" name="rdfilte"
								id="tatca" value="tatca" th:checked="${statusRd =='tatca'}">
							<label class="form-check-label" for="flexRadioDefault1">
								Tất cả </label>
						</div>
						<div class="form-check ps-5 mt-2">
							<input class="form-check-input" type="radio" name="rdfilte"
								id="quahan" value="quahan" th:checked="${statusRd =='quahan'}">
							<label class="form-check-label" for="flexRadioDefault2">
								Quá Hạn </label>
						</div>
					</div>
					<div class=" col-5 col-sm-5 ">
						<div class="row">
							<div class="input-lable w-25" id="inputGroup-sizing-default">Từ
							</div>
							<input type="date" name="from" class="date-filter w-75"
								th:value="${timeFrom}">
						</div>
						<div class="row mt-2">
							<div class="input-lable w-25" id="inputGroup-sizing-default">Đến</div>
							<input type="date" class="date-filter w-75" name="to"
								th:value="${timeTo}" th:max="${timeNow}">
						</div>
					</div>
					<div class="col-2 col-sm-2 d-flex justify-content-center">
						<button type="submit" name="btnfilter"
							class="h-50 w-75 btn btn-primary" style="align-self: center;">Lọc</button>
					</div>
				</form>

				<div
					class="d-flex justify-content-between align-items-center mt-4 mb-3">
					<form target="_blank">
						<button type="submit" name="print"
							class="fa-solid fa-print btn-print"></button>
					</form>
					<div class="tag-paging">
						<div
							th:replace="pagination :: paging(${pagedListHolder}, ${pagedLink})"></div>
					</div>
				</div>
				<div class="contain-table">
					<table class="table" id="tb1"
						style="vertical-align: middle; text-align: center;">
						<thead>
							<tr>
								<th scope="col">Mã PM</th>
								<th scope="col">Phòng</th>
								<th scope="col" style="width: 240px;">Lớp Học</th>
								<th scope="col">Thời Điểm Mượn</th>
								<th scope="col">Hạn Trả</th>
								<th scope="col">Tình Trạng</th>
								<th scope="col">Chi tiết</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="pd, i : ${pagedListHolder.pageList}">
								<td th:text="${pd.maPhieuMuon}"></td>
								<td th:text="${pd.maPhg.maPhong}"></td>
								<td
									th:text="${pd.lopTC.monhoc} + ' nhóm ' + ${pd.lopTC.nhom} + ' (' + ${pd.lopTC.nienkhoa} + ' hk:' + ${pd.lopTC.hocky} + ')'"></td>
								<td
									th:text="${#dates.format(pd.thoiDiemMuon, 'dd/MM/yyyy HH:mm')}"></td>
								<td th:text="${#dates.format(pd.hanTra, 'dd/MM/yyyy HH:mm')}"></td>
								<td th:text="${pd.thoiDiemTra== null ? 'Chưa Trả' : 'Đã Trả'}"></td>
								<td><a
									th:href="@{'bill/detail_' + ${pd.maPhieuMuon} + '.htm'}"><i
										class="fas fa-info-circle icon"></i></a></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<!-- Modal -->
		<!-- Modal Chi Tiet Phieu Muon -->
		<div class="modal js-modal" th:classappend="${statusModal}">
			<div class="modal-container js-modal-contain">
				<div class="modal-close js-modal-close">
					<i class="fa-solid fa-xmark"></i>
				</div>

				<header class="modal-header">
					<i class="ti-bag modal-heading-icon"></i>
					<div>PHIẾU MƯỢN</div>
				</header>
				<div class="modal-body">

					<div class="row mb-3" style="height: 240px">

						<div class="col-sm-6" style="border-style: outset;">
							<h4 class="text-center">Thông tin</h4>
							<p>
								<b>Lớp:</b> <span
									th:text="${thongtinPhieuMuon.lopTC.monhoc} + ' nhóm ' + ${thongtinPhieuMuon.lopTC.nhom}"></span>
							</p>
							<p>
								<b>Phòng:</b> <span th:text="${thongtinPhieuMuon.maPhg.maPhong}"></span>
							</p>
							<p>
								Ngày mượn: <span
									th:text="${#dates.format(thongtinPhieuMuon.thoiDiemMuon, 'dd/MM/yyyy HH:mm')}"></span>
							</p>
							<p>
								Hạn Trả: <span
									th:text="${#dates.format(thongtinPhieuMuon.hanTra, 'dd/MM/yyyy HH:mm')}"></span>
							</p>

						</div>

						<!-- Your other divs here -->

					</div>
				</div>

			</div>
		</div>

	</section>
	<!-- Include your footer here -->
	<script th:inline="javascript">
        /*<![CDATA[*/
        // Your JavaScript code here
        /*]]>*/
    </script>
</body>
</html>