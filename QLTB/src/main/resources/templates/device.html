<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Google Fonts -->
<link href="https://fonts.gstatic.com" rel="preconnect">

<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
	rel="stylesheet">
</head>
<body>
	<div th:replace="fragments/header :: header"></div>
	<div th:replace="include/slidebar :: slidebar"></div>

	<section class="home">
		<div class="text">Thiết Bị</div>
		<div id="toast" th:class="${message}"></div>

		<div class="container">
			<button class="btn-add btn btn-primary" style="margin-left: 9%;"
				onclick="showBuyTicket()">
				<i class="fa-solid fa-plus"></i> THÊM THIẾT BỊ
			</button>

			<div class="tag-paging pt-2" style="margin-right: 9%;">
				<div th:replace="fragments/paging :: paging(${pagedListHolder})"></div>
			</div>

			<div class="d-flex justify-content-center align-items-center mt-4">
				<div class="row col-lg-10">
					<table class="table" id="tb1">
						<thead>
							<tr>
								<th scope="col">STT</th>
								<th scope="col">Mã TB</th>
								<th scope="col">Loại TB</th>
								<th scope="col">Phòng</th>
								<th scope="col">Tình Trạng</th>
								<th scope="col">Xóa</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="pd, i : ${pagedListHolder.pageList}">
								<td th:text="${i.index + 1}"></td>
								<td th:text="${pd.maTBi}"></td>
								<td th:text="${pd.loaiTBi.tenLoai}"></td>
								<td th:text="${pd.phong.maPhong}"></td>
								<td th:text="${pd.tinhTrangTB}"></td>
								<td><a
									th:href="@{'device_list/index/' + ${pd.maTBi} + '.htm?linkDelete'}"
									th:class="${pd.phong == null ? '' : 'disable-delete'}"
									onclick="return confirm('Xác nhận xóa?') ? true : false;"
									style="padding: 5px 10px;"> <i
										class="fa-solid fa-trash-can"></i>
								</a></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>

		<section>
			<!-- Include your footer content here -->
		</section>
	</section>

	<div class="modal js-modal">
		<div class="modal-container js-modal-contain" style="width: 620px;">
			<div class="modal-close js-modal-close">
				<i class="fa-solid fa-xmark"></i>
			</div>
			<header class="modal-header">
				<i class="ti-bag modal-heading-icon"></i> THÊM THIẾT BỊ
			</header>
			<div class="modal-body">
				<form th:action="@{/device_list/index}" th:object="${CTThietBi}"
					method="post">
					<input type="hidden" th:field="*{phong.maPhong}" /> <label
						for="quantity-ticket" class="modal-lable"> <i
						class="ti-shopping-cart"></i> Loại Thiết Bị
					</label> <select th:field="*{loaiTBi.maLoai}"
						class="form-select-lg form-select mb-2">
						<option th:each="loaiTB : ${listLoaiTB}"
							th:value="${loaiTB.maLoai}" th:text="${loaiTB.tenLoai}"></option>
					</select> <label for="quantity-ticket" class="modal-lable"> <i
						class="ti-shopping-cart"></i> Số Lượng
					</label> <input name="soLuong" type="text" class="modal-ip mb-5" required
						pattern="[1-9][0-9]{0,1}"
						oninvalid="setCustomValidity('Số lượng nằm trong khoảng từu 1 đến 99')"
						onchange="try{setCustomValidity('')}catch(e){}">
					<button id="btnsave" name="btnadd" class="btn-modal">THÊM</button>
				</form>
				<footer class="modal-footer"> </footer>
			</div>
		</div>
	</div>

	<script th:inline="javascript">
        /*<![CDATA[*/
        var tb = document.getElementById('toast');
        if (tb.classList.contains('success')) {
            showtoast({
                title : "Thành công!",
                message : "'[[${myparam}]]' loại thiết bị thành công.",
                type : "success",
                duration : 3000
            });
        } else if (tb.classList.contains('error')) {
            showtoast({
                title : "Lỗi!",
                message : "[[${myparam}]] loại thiết bị thất bại.",
                type : "error",
                duration : 3000
            });
        }
        /*]]>*/
    </script>
</body>
</html>